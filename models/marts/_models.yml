version: 2

models:
  - name: dim_clients
    description: "Dimension clients avec segmentation"
    columns:
      - name: client_id
        description: "Clé primaire"
        tests:
          - unique:
               severity: error
          - not_null:
               severity: error
      - name: segment
        description: "Segment commercial"
        tests:
          - accepted_values:
              values: ['Gold', 'Silver', 'Bronze']
              severity: warn

  - name: fct_contrats
    description: "Table de faits contrats"
    columns:
      - name: contrat_id
        description: "Clé primaire"
        tests:
          - unique:
              severity: error
          - not_null:
              severity: error
      - name: client_id
        tests:
          - not_null:
              severity: error

  - name: fct_sinistres
    description: "Table de faits sinistres"
    columns:
      - name: sinistre_id
        description: "Clé primaire"
        tests:
          - unique:
              severity: error
          - not_null:
              severity: warn
      - name: contrat_id
        tests:
          - not_null:
               severity: error